webpackJsonp([2],{500:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l,u,o=(n(510),n(509)),i=a(o),r=(n(523),n(522)),s=a(r),d=n(55),c=a(d),f=n(51),m=a(f),p=n(54),h=a(p),v=n(53),_=a(v),g=n(52),y=a(g),C=n(529),b=n(81),S=n(503),k=a(S),E=n(12),N=a(E),M=n(80),D=n(527),x=a(D),O=n(528),I=a(O),w=n(513),P=(a(w),n(145)),T=n(541),U=a(T),j=n(148),A=(a(j),l=(0,M.connect)(function(e){return{login:e.login}},function(e){return{signOutAction:function(){e((0,P.signOut)())},signInAction:function(){e((0,P.signIn)())}}}),(0,b.withRouter)(u=l(u=function(e){function t(e){return(0,m.default)(this,t),(0,_.default)(this,(t.__proto__||(0,c.default)(t)).call(this,e))}return(0,y.default)(t,e),(0,h.default)(t,[{key:"componentDidMount",value:function(){this._redirectSignInValidate(this.props)}},{key:"componentWillReceiveProps",value:function(e){this._redirectSignOutValidate(e)}},{key:"handleSignOut",value:function(e){this.props.signOutAction()}},{key:"_redirectSignOutValidate",value:function(e){var t=e.login,n=e.history;t.isAuthenticating_in||t.user||n.push("Login",{})}},{key:"_redirectSignInValidate",value:function(e){!this.props.login.user&&this.props.signInAction()}},{key:"render",value:function(){var e=(0,C.getDataDeep)(["user","userName"],this.props.login);return N.default.createElement(k.default,{transitionName:"slideIn",transitionEnterTimeout:500,transitionLeaveTimeout:300,transitionAppear:!0,transitionAppearTimeout:500},N.default.createElement("div",{className:U.default.wrapper},N.default.createElement("div",{className:U.default.container},N.default.createElement("div",{className:U.default.header},N.default.createElement(s.default,{"data-seed":"logId"},"welcome, "+e)),N.default.createElement("div",{className:U.default.content},N.default.createElement(x.default,null),N.default.createElement(I.default,null)),N.default.createElement("div",{className:U.default.footer},N.default.createElement(i.default,{type:"warning",onClick:this.handleSignOut.bind(this)},"SIGNOUT")))))}}]),t}(E.Component))||u)||u);t.default=A},514:function(e,t,n){e.exports={default:n(531),__esModule:!0}},518:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return Object.keys(e).reduce(function(t,n){return"aria-"!==n.substr(0,5)&&"data-"!==n.substr(0,5)&&"role"!==n||(t[n]=e[n]),t},{})},e.exports=t.default},522:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=n(143),u=a(l),o=n(504),i=a(o),r=n(51),s=a(r),d=n(53),c=a(d),f=n(52),m=a(f),p=n(12),h=a(p),v=n(505),_=a(v),g=n(511),y=a(g),C=n(518),b=a(C),S=function(e){function t(n){(0,s.default)(this,t);var a=(0,c.default)(this,e.call(this,n));return a.onClick=function(){var e=a.props,t=e.disabled,n=e.onChange;if(!t){var l=a.state.selected;a.setState({selected:!l},function(){n&&n(!l)})}},a.onTagClose=function(){a.props.onClose&&a.props.onClose(),a.setState({closed:!0},a.props.afterClose)},a.state={selected:n.selected,closed:!1},a}return(0,m.default)(t,e),t.prototype.componentWillReceiveProps=function(e){this.props.selected!==e.selected&&this.setState({selected:e.selected})},t.prototype.render=function(){var e,t=this.props,n=t.children,a=t.className,l=t.prefixCls,o=t.disabled,r=t.closable,s=t.small,d=t.style,c=(0,_.default)((e={},(0,i.default)(e,a,!!a),(0,i.default)(e,""+l,!0),(0,i.default)(e,l+"-normal",!o&&(!this.state.selected||s||r)),(0,i.default)(e,l+"-small",s),(0,i.default)(e,l+"-active",this.state.selected&&!o&&!s&&!r),(0,i.default)(e,l+"-disabled",o),(0,i.default)(e,l+"-closable",r),e)),f=!r||o||s?null:h.default.createElement("div",{className:l+"-close",role:"button",onClick:this.onTagClose,"aria-label":"remove tag"},h.default.createElement(y.default,{type:"cross-circle",size:"xs","aria-hidden":"true"}));return this.state.closed?null:h.default.createElement("div",(0,u.default)({},(0,b.default)(this.props),{className:c,onClick:this.onClick,style:d}),h.default.createElement("div",{className:l+"-text"},n),f)},t}(h.default.Component);t.default=S,S.defaultProps={prefixCls:"am-tag",disabled:!1,selected:!1,closable:!1,small:!1,onChange:function(){},onClose:function(){},afterClose:function(){}},e.exports=t.default},523:function(e,t,n){"use strict";n(508),n(512),n(547)},524:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=n(55),u=a(l),o=n(51),i=a(o),r=n(54),s=a(r),d=n(53),c=a(d),f=n(52),m=a(f),p=n(503),h=(a(p),n(12)),v=a(h),_=function(e){function t(){(0,i.default)(this,t);var e=(0,c.default)(this,(t.__proto__||(0,u.default)(t)).call(this));return e.state={timeString:""},e}return(0,m.default)(t,e),(0,s.default)(t,[{key:"_updateTimeString",value:function(){var e=this.props.comment,t=(+Date.now()-e.createTime)/1e3;this.setState({timeString:t>60?Math.round(t/60)+"分钟前":Math.round(Math.max(t,1))+" 秒前"})}},{key:"handleDeleteComment",value:function(){this.props.onDeleteComment&&this.props.onDeleteComment(this.props.index)}},{key:"_getProcessedContent",value:function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;").replace(/`([\S\s]+?)`/g,"<code>$1</code>")}},{key:"render",value:function(){return v.default.createElement("div",{className:"comment"},v.default.createElement("div",{className:"comment-user"},v.default.createElement("span",null,this.props.comment.username),v.default.createElement("p",{dangerouslySetInnerHTML:{__html:this._getProcessedContent(this.props.comment.content)}}),v.default.createElement("span",null,this.state.timeString),v.default.createElement("span",{onClick:this.handleDeleteComment.bind(this)},"删除")))}}]),t}(h.Component);t.default=_},525:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=n(55),u=a(l),o=n(51),i=a(o),r=n(54),s=a(r),d=n(53),c=a(d),f=n(52),m=a(f),p=n(12),h=a(p),v=function(e){function t(e){(0,i.default)(this,t);var n=(0,c.default)(this,(t.__proto__||(0,u.default)(t)).call(this,e));return n.state={username:e.username,content:""},n}return(0,m.default)(t,e),(0,s.default)(t,[{key:"handleUsernameChange",value:function(e){this.setState({username:e.target.value})}},{key:"handleContentChange",value:function(e){this.setState({content:e.target.value})}},{key:"handleSubmit",value:function(){if(this.props.onSubmit){var e=this.state,t=e.username,n=e.content;this.props.onSubmit({username:t,content:n,createTime:+new Date})}this.setState({content:""})}},{key:"handleUsernameBlur",value:function(e){this.props.onUserNameInputBlur&&this.props.onUserNameInputBlur(e.target.value)}},{key:"_saveUsername",value:function(e){localStorage.setItem("username",e)}},{key:"_loadUsername",value:function(){var e=localStorage.getItem("username");e&&this.setState({username:e})}},{key:"componentWillMount",value:function(){"undefined"!=typeof window&&this._loadUsername()}},{key:"handleImmutable",value:function(){this.setState({immutable:{data:222}})}},{key:"componentDidMount",value:function(){this.textarea.focus()}},{key:"render",value:function(){var e=this;return h.default.createElement("div",{className:"comment-input"},h.default.createElement("div",{className:"comment-field"},h.default.createElement("span",{className:"comment-field-name"},"用户名:"),h.default.createElement("div",{className:"comment-field-input"},h.default.createElement("input",{type:"text",value:this.state.username,onChange:this.handleUsernameChange.bind(this),onBlur:this.handleUsernameBlur.bind(this),ref:function(t){e.input=t}}))),h.default.createElement("div",{className:"comment-field"},h.default.createElement("span",{className:"comment-field-name"},"评论:"),h.default.createElement("div",{className:"comment-field-input"},h.default.createElement("textarea",{value:this.state.content,onChange:this.handleContentChange.bind(this),ref:function(t){e.textarea=t}}))),h.default.createElement("div",{className:"comment-field-button"},h.default.createElement("input",{type:"button",value:"发布",onClick:this.handleSubmit.bind(this)})),this.props.children)}}]),t}(p.Component);t.default=v,v.propTypes={onSubmit:p.PropTypes.func}},526:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=n(55),u=a(l),o=n(51),i=a(o),r=n(54),s=a(r),d=n(53),c=a(d),f=n(52),m=a(f),p=n(503),h=a(p),v=n(12),_=a(v),g=n(524),y=a(g),C=function(e){function t(){return(0,i.default)(this,t),(0,c.default)(this,(t.__proto__||(0,u.default)(t)).apply(this,arguments))}return(0,m.default)(t,e),(0,s.default)(t,[{key:"handleDeleteComment",value:function(e){this.props.onDeleteComment&&this.props.onDeleteComment(e)}},{key:"render",value:function(){var e=this,t=this.props.comments||[];return _.default.createElement("div",null,_.default.createElement(h.default,{transitionName:"example",transitionEnterTimeout:500,transitionLeaveTimeout:300,transitionAppear:!0,transitionAppearTimeout:500},t.map(function(t,n){return _.default.createElement(y.default,{comment:t,key:n,index:n,onDeleteComment:e.handleDeleteComment.bind(e)})})))}}]),t}(v.Component);t.default=C},527:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var l=n(514),u=a(l),o=n(146),i=a(o),r=n(83),s=a(r),d=n(55),c=a(d),f=n(51),m=a(f),p=n(54),h=a(p),v=n(53),_=a(v),g=n(52),y=a(g),C=n(12),b=a(C),S=n(80),k=n(525),E=a(k),N=n(144),M=function(e){function t(){(0,m.default)(this,t);var e=(0,_.default)(this,(t.__proto__||(0,c.default)(t)).call(this));return e.state={username:""},e}return(0,y.default)(t,e),(0,h.default)(t,[{key:"_loadUsername",value:function(){var e=localStorage.getItem("username");e&&this.setState({username:e})}},{key:"_saveUsername",value:function(e){localStorage.setItem("username",e)}},{key:"handleSubmitComment",value:function(e){if(e){if(!e.username)return alert("请输入用户名");if(!e.content)return alert("请输入评论内容");if(void 0!==("undefined"==typeof window?"undefined":(0,s.default)(window))){var t=this.props.comments,n=[].concat((0,i.default)(t),[e]);localStorage.setItem("comments",(0,u.default)(n))}this.props.onSubmit&&this.props.onSubmit(e)}}},{key:"componentWillMount",value:function(){"undefined"!=typeof window&&this._loadUsername()}},{key:"render",value:function(){return b.default.createElement(E.default,{username:this.state.username,onUserNameInputBlur:this._saveUsername.bind(this),onSubmit:this.handleSubmitComment.bind(this)})}}]),t}(C.Component),D=function(e){return{comments:e.comment.comments}},x=function(e){return{onSubmit:function(t){e((0,N.addComment)(t))}}};t.default=(0,S.connect)(D,x)(M)},528:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var l=n(514),u=a(l),o=n(146),i=a(o),r=n(55),s=a(r),d=n(51),c=a(d),f=n(54),m=a(f),p=n(53),h=a(p),v=n(52),_=a(v),g=n(12),y=a(g),C=n(80),b=n(526),S=a(b),k=n(144),E=function(e){function t(){return(0,c.default)(this,t),(0,h.default)(this,(t.__proto__||(0,s.default)(t)).apply(this,arguments))}return(0,_.default)(t,e),(0,m.default)(t,[{key:"componentWillMount",value:function(){"undefined"!=typeof window&&this._loadComments()}},{key:"_loadComments",value:function(){var e=localStorage.getItem("comments");e=e?JSON.parse(e):[]}},{key:"handleDeleteComment",value:function(e){var t=this.props.comments,n=[].concat((0,i.default)(t.slice(0,e)),(0,i.default)(t.slice(e+1)));localStorage.setItem("comments",(0,u.default)(n)),this.props.onDeleteComment&&this.props.onDeleteComment(e)}},{key:"render",value:function(){return y.default.createElement(S.default,{comments:this.props.comments,onDeleteComment:this.handleDeleteComment.bind(this)})}}]),t}(g.Component),N=function(e){return{comments:e.comment.comments}},M=function(e){return{initComments:function(t){e((0,k.initComments)(t))},onDeleteComment:function(t){e((0,k.deleteComment)(t))},onAfterDeleteComment:function(t){e((0,k.afterDeleteComment)(t))}}};t.default=(0,C.connect)(N,M)(E)},529:function(e,t,n){"use strict";function a(e,t){return e.reduce(function(e,t){return e&&e[t]?e[t]:null},t)}Object.defineProperty(t,"__esModule",{value:!0}),t.getDataDeep=a},531:function(e,t,n){var a=n(10),l=a.JSON||(a.JSON={stringify:JSON.stringify});e.exports=function(e){return l.stringify.apply(l,arguments)}},541:function(e,t){e.exports={wrapper:"index_wrapper",container:"index_container",header:"index_header",footer:"index_footer",content:"index_content"}},547:function(e,t){}});